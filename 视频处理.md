graph TD
    A[Video Upload Complete] --> B{S3 Event Trigger}
    B -->|New Video Detected| C[Receive Processing Request]
    C --> D[Download Video from S3]
    D --> E{Download Success?}
    E -->|Yes| F[Initialize FFmpeg Decoder]
    E -->|No| G[Retry Download]
    G --> H{Retry Limit Reached?}
    H -->|No| D
    H -->|Yes| I[Mark as Failed]
    
    F --> J[Start Video Decoding]
    J --> K[Extract Video Metadata]
    K --> L[Validate Video Specifications]
    
    L --> M{Valid MP4 Format?}
    M -->|Yes| N{Correct Frame Rate?}
    M -->|No| O[Mark as Invalid Format]
    N -->|Yes| P{Correct Duration?}
    N -->|No| Q[Mark as Invalid Frame Rate]
    P -->|Yes| R[Extract Additional Metadata]
    P -->|No| S[Mark as Invalid Duration]
    
    R --> T{Quality Check Passed?}
    T -->|Yes| U[Prepare for Frame Extraction]
    T -->|No| V[Mark as Poor Quality]
    
    U --> W[Send to Frame Extraction Service]
    W --> X{Transfer Success?}
    X -->|Yes| Y[Log Processing Complete]
    X -->|No| Z[Retry Transfer]
    
    Y --> AA[Clean Up Temporary Files]
    AA --> AB[Update Processing Status]
    
    I --> AC[Log Failure]
    O --> AC
    Q --> AC
    S --> AC
    V --> AC
    
    AC --> AD[Notify Error Handling System]
